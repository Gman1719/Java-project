<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.MenuButton?>
<?import javafx.scene.control.MenuItem?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>

<BorderPane fx:id="mainBorderPane" style="-fx-background-color:#F5F7FA;" xmlns:fx="http://javafx.com/fxml/1" xmlns="http://javafx.com/javafx/24.0.1" fx:controller="controllers.AdminDashboardController">

    <top>
        <HBox spacing="20" style="-fx-padding:15 25; -fx-background-color:#FFFFFF; -fx-alignment:center-left; -fx-effect: dropshadow(two-pass-box, rgba(0,0,0,0.05), 5, 0, 0, 2);"> 
            <Label style="-fx-font-size:24px; -fx-font-weight:bold; -fx-text-fill:#2C3E50;" text="Admin System Control" />
            <Region HBox.hgrow="ALWAYS" />
            
            <Button onAction="#openAddEmployee" style="-fx-background-color:#4A90E2; -fx-text-fill:white; -fx-font-weight:bold; -fx-padding:8 15; -fx-cursor:hand;" text="Add Employee" />
            <Button onAction="#openPayrollManagement" style="-fx-background-color:#FF9500; -fx-text-fill:white; -fx-font-weight:bold; -fx-padding:8 15; -fx-cursor:hand;" text="Generate Payroll" />
            <Button onAction="#openNotifications" style="-fx-background-color:#F0F0F0; -fx-text-fill:#2C3E50; -fx-font-weight:bold; -fx-padding:8 15; -fx-cursor:hand;" text="Notifications" />
            
            <MenuButton style="-fx-background-color:#F0F0F0; -fx-text-fill:#2C3E50; -fx-font-weight:bold; -fx-padding:8 15; -fx-cursor:hand;" text="Settings">
                <items>
                    <MenuItem onAction="#openProfile" text="Profile" />
                    <MenuItem onAction="#openSystemSettings" text="System Settings" />
                    <MenuItem onAction="#changePassword" text="Change Password" />
                </items>
            </MenuButton>
        </HBox>
    </top>

    <left>
        <VBox prefWidth="220" spacing="10" style="-fx-padding:15; -fx-background-color:#34495E; -fx-border-color:rgba(0,0,0,0.1); -fx-border-width:0 1 0 0;">
            <Button lineSpacing="4.0" maxWidth="Infinity" onAction="#openDashboard" style="-fx-background-color: transparent; -fx-text-fill: white; -fx-alignment: center-left; -fx-padding: 12 15; -fx-cursor: hand;" text="Admin Dashboard" />
            <Button maxWidth="Infinity" onAction="#openUserManagement" style="-fx-background-color: transparent; -fx-text-fill: white; -fx-alignment: center-left; -fx-padding: 12 15; -fx-cursor: hand;" text="User Management" />
            <Button maxWidth="Infinity" onAction="#openDepartmentManagement" style="-fx-background-color: transparent; -fx-text-fill: white; -fx-alignment: center-left; -fx-padding: 12 15; -fx-cursor: hand;" text="Department Mgt" />
            <Button maxWidth="Infinity" onAction="#openPayrollManagement" style="-fx-background-color: transparent; -fx-text-fill: white; -fx-alignment: center-left; -fx-padding: 12 15; -fx-cursor: hand;" text="Payroll Management" />
            <Button maxWidth="Infinity" onAction="#openAttendanceLeaves" style="-fx-background-color: transparent; -fx-text-fill: white; -fx-alignment: center-left; -fx-padding: 12 15; -fx-cursor: hand;" text="Attendance &amp; Leaves" />
            <Button maxWidth="Infinity" onAction="#openReports" style="-fx-background-color: transparent; -fx-text-fill: white; -fx-alignment: center-left; -fx-padding: 12 15; -fx-cursor: hand;" text="System Reports" />
            <Button maxWidth="Infinity" onAction="#openRequests" style="-fx-background-color: transparent; -fx-text-fill: white; -fx-alignment: center-left; -fx-padding: 12 15; -fx-cursor: hand;" text="Inbound Requests" />
            
            <Region VBox.vgrow="ALWAYS" /> 
            <Button maxWidth="Infinity" onAction="#handleLogout" style="-fx-background-color: #E74C3C; -fx-text-fill: white; -fx-font-weight: bold; -fx-padding: 12 15; -fx-cursor: hand;" text="Logout" />
        </VBox>
    </left>

    <center>
        <ScrollPane fitToHeight="true" fitToWidth="true" style="-fx-background-color: transparent;">
            <VBox fx:id="mainContent" spacing="30" style="-fx-padding:30;">
                
                <HBox spacing="20">
                    <VBox style="-fx-background-color:white; -fx-background-radius:8; -fx-padding:30 20; -fx-border-color:#E0E0E0; -fx-border-width:0 0 4 0;" HBox.hgrow="ALWAYS">
                        <Label style="-fx-text-fill:#7F8C8D; -fx-font-size:14px;" text="System Users" />
                        <Label fx:id="lblTotalEmployees" style="-fx-font-size:40px; -fx-font-weight:bold; -fx-text-fill:#2980B9;" text="0" />
                    </VBox>
                    <VBox style="-fx-background-color:white; -fx-background-radius:8; -fx-padding:30 20; -fx-border-color:#E0E0E0; -fx-border-width:0 0 4 0;" HBox.hgrow="ALWAYS">
                        <Label style="-fx-text-fill:#7F8C8D; -fx-font-size:14px;" text="Leave Approvals" />
                        <Label fx:id="lblPendingLeaves" style="-fx-font-size:40px; -fx-font-weight:bold; -fx-text-fill:#D35400;" text="0" />
                    </VBox>
                    <VBox style="-fx-background-color:white; -fx-background-radius:8; -fx-padding:30 20; -fx-border-color:#E0E0E0; -fx-border-width:0 0 4 0;" HBox.hgrow="ALWAYS">
                        <Label style="-fx-text-fill:#7F8C8D; -fx-font-size:14px;" text="Open Requests" />
                        <Label fx:id="lblPendingRequests" style="-fx-font-size:40px; -fx-font-weight:bold; -fx-text-fill:#E74C3C;" text="0" />
                    </VBox>
                    <VBox style="-fx-background-color:white; -fx-background-radius:8; -fx-padding:30 20; -fx-border-color:#E0E0E0; -fx-border-width:0 0 4 0;" HBox.hgrow="ALWAYS">
                        <Label style="-fx-text-fill:#7F8C8D; -fx-font-size:14px;" text="Payroll Status" />
                        <Label fx:id="lblPayrollPending" style="-fx-font-size:40px; -fx-font-weight:bold; -fx-text-fill:#27AE60;" text="0" />
                    </VBox>
                </HBox>

                <HBox spacing="30">
                    <VBox spacing="10" style="-fx-background-color:white; -fx-background-radius:8; -fx-padding:20;" HBox.hgrow="ALWAYS">
                        <Label style="-fx-font-weight:bold; -fx-font-size:16px;" text="System Financial Overview" />
                        <StackPane fx:id="salaryChartContainer" minHeight="250" />
                    </VBox>
                    <VBox spacing="10" style="-fx-background-color:white; -fx-background-radius:8; -fx-padding:20;" HBox.hgrow="ALWAYS">
                        <Label style="-fx-font-weight:bold; -fx-font-size:16px;" text="User Activity Summary" />
                        <StackPane fx:id="attendanceChartContainer" minHeight="250" />
                    </VBox>
                </HBox>

                <VBox VBox.vgrow="ALWAYS"> 
                    <Label style="-fx-font-weight:bold; -fx-font-size:18px; -fx-padding:0 0 10 0;" text="Master User List" />
                    <TableView fx:id="tblEmployees" minHeight="300" VBox.vgrow="ALWAYS"> 
                        <columns>
                            <TableColumn fx:id="colId" prefWidth="50" text="ID" />
                            <TableColumn fx:id="colUsername" prefWidth="100" text="Username" />
                            <TableColumn fx:id="colName" prefWidth="180" text="Full Name" />
                            <TableColumn fx:id="colDept" prefWidth="150" text="Department" />
                            <TableColumn fx:id="colRole" prefWidth="120" text="System Role" />
                            <TableColumn fx:id="colStatus" prefWidth="80" text="Account Status" />
                            <TableColumn fx:id="colActions" prefWidth="150" text="Administrative Actions" />
                        </columns>
                        <columnResizePolicy>
                            <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
                        </columnResizePolicy>
                    </TableView>
                </VBox>
            </VBox>
        </ScrollPane>
    </center>
</BorderPane>