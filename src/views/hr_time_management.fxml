<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>
<?import java.net.URL?>

<AnchorPane prefHeight="780.0" prefWidth="1200.0" styleClass="content-pane" xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1" fx:controller="controllers.TimeManagementController">
    <stylesheets>
        <URL value="@/css/hr_dashboard_styles.css" />
    </stylesheets>
    
    <VBox spacing="15.0" AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" AnchorPane.topAnchor="0.0">
        <Label text="Attendance &amp; Leave Management" styleClass="view-title">
            <font><Font size="24.0" /></font>
        </Label>

        <TabPane VBox.vgrow="ALWAYS" tabClosingPolicy="UNAVAILABLE" styleClass="tab-pane-modern">
            
            <Tab text="Time Off &amp; Leave Management">
                <SplitPane dividerPositions="0.65" styleClass="split-pane-main">
                    
                    <AnchorPane>
                        <VBox spacing="10.0" AnchorPane.bottomAnchor="10.0" AnchorPane.leftAnchor="10.0" AnchorPane.rightAnchor="10.0" AnchorPane.topAnchor="10.0">
                            <HBox alignment="CENTER_LEFT" spacing="10.0">
                                <Label text="Pending Leave Requests" styleClass="panel-title" />
                                <Region HBox.hgrow="ALWAYS" />
                                <Button text="Bulk Approve" onAction="#bulkApproveLeaves" styleClass="button-primary" />
                                <Button text="View History" onAction="#viewLeaveHistory" styleClass="button-secondary" />
                            </HBox>
                            
                            <TableView fx:id="tblLeaveRequests" VBox.vgrow="ALWAYS">
                                <columns>
                                    <TableColumn fx:id="colReqID" text="Req ID" prefWidth="60.0" />
                                    <TableColumn fx:id="colReqEmployee" text="Employee" prefWidth="150.0" />
                                    <TableColumn fx:id="colReqType" text="Type" prefWidth="100.0" />
                                    <TableColumn fx:id="colReqDuration" text="Duration (Days)" prefWidth="100.0" />
                                    <TableColumn fx:id="colReqDates" text="Start/End Date" prefWidth="180.0" />
                                    <TableColumn fx:id="colReqActions" text="Actions" prefWidth="100.0" />
                                </columns>
                                <columnResizePolicy><TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/></columnResizePolicy>
                            </TableView>
                        </VBox>
                    </AnchorPane>
                    
                    <AnchorPane>
                        <VBox spacing="15.0" AnchorPane.bottomAnchor="10.0" AnchorPane.leftAnchor="10.0" AnchorPane.rightAnchor="10.0" AnchorPane.topAnchor="10.0">
                            <Label text="Leave Balances &amp; Policy" styleClass="panel-title" />
                            <TableView fx:id="tblLeaveBalances" prefHeight="250.0">
                                <columns>
                                    <TableColumn fx:id="colBalanceEmployee" text="Employee" prefWidth="150.0" />
                                    <TableColumn fx:id="colBalanceAnnual" text="Annual Days" prefWidth="100.0" />
                                    <TableColumn fx:id="colBalanceSick" text="Sick Days" prefWidth="100.0" />
                                    <TableColumn fx:id="colBalanceUsed" text="Used" prefWidth="60.0" />
                                </columns>
                                <columnResizePolicy><TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/></columnResizePolicy>
                            </TableView>
                            
                            <Button text="Update Leave Policy Settings" onAction="#updateLeavePolicy" maxWidth="Infinity" styleClass="button-secondary" />
                            
                            <Separator />

                            <Label text="Quick Action: Adjust Balance" styleClass="panel-title-small" />
                            <HBox spacing="10.0">
                                <TextField fx:id="txtEmployeeIDAdjust" promptText="Employee ID" HBox.hgrow="ALWAYS" />
                                <TextField fx:id="txtDaysAdjust" promptText="Days (+/-)" prefWidth="80.0" />
                                <Button text="Adjust" onAction="#adjustLeaveBalance" styleClass="button-primary" />
                            </HBox>

                        </VBox>
                    </AnchorPane>
                </SplitPane>
            </Tab>
            
            <Tab text="Daily Attendance Tracking">
                <VBox spacing="10.0" style="-fx-padding: 10;">
                    <HBox alignment="CENTER_LEFT" spacing="10.0">
                        <Label text="Attendance Records" styleClass="panel-title" />
                        <DatePicker fx:id="dpAttendanceDate" onAction="#loadAttendanceByDate" promptText="Select Date" />
                        <ComboBox fx:id="cmbAttendanceDepartment" promptText="Filter by Department" />
                        <Region HBox.hgrow="ALWAYS" />
                        <Button text="Import Clock Data" onAction="#importAttendanceData" styleClass="button-primary" />
                    </HBox>
                    
                    <TableView fx:id="tblAttendanceRecords" VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn fx:id="colAttEmployee" text="Employee" prefWidth="150.0" />
                            <TableColumn fx:id="colAttDate" text="Date" prefWidth="100.0" />
                            <TableColumn fx:id="colAttTimeIn" text="Time In" prefWidth="80.0" />
                            <TableColumn fx:id="colAttTimeOut" text="Time Out" prefWidth="80.0" />
                            <TableColumn fx:id="colAttTotalHours" text="Total Hours" prefWidth="80.0" />
                            <TableColumn fx:id="colAttStatus" text="Status" prefWidth="100.0" />
                            <TableColumn fx:id="colAttAction" text="Action" prefWidth="80.0" />
                        </columns>
                        <columnResizePolicy><TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/></columnResizePolicy>
                    </TableView>

                    <HBox alignment="CENTER_RIGHT" spacing="10.0">
                        <Label text="Summary for Selected Day:" />
                        <Label fx:id="lblSummaryPresent" text="Present: 0" styleClass="summary-label-present" />
                        <Label fx:id="lblSummaryAbsent" text="Absent: 0" styleClass="summary-label-absent" />
                        <Label fx:id="lblSummaryLate" text="Late: 0" styleClass="summary-label-late" />
                    </HBox>
                    
                </VBox>
            </Tab>
            
        </TabPane>
        
    </VBox>
</AnchorPane>